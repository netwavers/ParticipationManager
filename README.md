# ParticipationManager

YouTube配信での参加者管理を効率化するWebアプリケーション

## 概要

ParticipationManagerは、YouTube Liveのチャット参加者を管理し、セッション制で順番に参加者を選出するためのツールです。ゲーム配信やイベント配信で、視聴者の参加を公平に管理できます。

## 主な機能

### 参加者管理
- **手動追加**: 参加者名を手動で入力して待機キューに追加
- **YouTube Live連携**: YouTube Live Chatから特定のキーワード（デフォルト: `参加希望`）を検出して自動で参加者を追加
- **参加辞退**: YouTube Live Chatから辞退キーワード（デフォルト: `参加辞退`）を検出して待機キューから自動削除
- **待機キュー**: 参加待ちのユーザーをリアルタイムで表示
- **プレイ回数追跡**: 各参加者のプレイ回数を自動カウント

### セッション管理
- **セッションサイズ設定**: 1回のセッションで選出する参加者数を設定可能
- **順番選出**: プレイ回数が少ない順、同数の場合は参加時刻順に自動選出
- **ランダム選出**: 待機キューからランダムに参加者を選出
- **セッションタイマー**: 設定した時間（分単位）でカウントダウン、時間切れ時にアラート通知

### 履歴管理
- **現在のセッション**: 現在プレイ中の参加者を表示
- **履歴**: 過去にプレイした参加者とプレイ回数を記録
- **キューへの復帰**: セッション中または履歴から待機キューに戻すことが可能

## 使い方

### 基本的な使用方法

1. **ブラウザで開く**: `index.html`をブラウザで開きます
2. **参加者を追加**: 
   - 手動で名前を入力して追加、または
   - YouTube Live連携を設定して自動追加
3. **セッション開始**: 
   - セッションサイズを設定
   - タイマーを設定（オプション）
   - 「Start Next Session」または「Pick Random」をクリック
4. **セッション管理**: 
   - プレイ終了後、「Finish」ボタンで履歴に移動
   - 必要に応じて「Return to Queue」で待機キューに戻す

### YouTube Live連携

1. **YouTube Data API v3のAPIキーを取得**:
   - [Google Cloud Console](https://console.cloud.google.com/)でプロジェクトを作成
   - YouTube Data API v3を有効化
   - APIキーを作成

2. **設定**:
   - APIキーを入力
   - 配信のVideo IDを入力（URLの`v=`の後の文字列）
   - 参加キーワードを設定（デフォルト: `参加希望`）
   - 参加辞退キーワードを設定（デフォルト: `参加辞退`）
   - 「Connect Stream」をクリック

3. **自動追加**: 視聴者がチャットで参加キーワードを送信すると、自動的に待機キューに追加されます

4. **自動削除**: 視聴者がチャットで参加辞退キーワードを送信すると、待機キューから自動的に削除されます
   - 注意: 現在セッション中の参加者は削除されません（待機キューのみ対象）

### Discord Bot連携

Discord Bot (`ParticipationManagerBot`) と連携することで、Discordからの参加者も一元管理できます。

1. **Botの準備**:
   - `ParticipationManagerBot` を起動しておきます（`node index.js`）。
   - Botが `http://localhost:3000` でAPIサーバーとして待機します。

2. **Webアプリでの設定**:
   - 画面左下の「Bot Integration」カードを探します。
   - 「Enable Sync」スイッチをONにします。
   - 接続が成功すると「Connected」と表示され、Botのデータ（待機列、セッション）がWebアプリに同期されます。

3. **操作**:
   - Webアプリで行う操作（追加、削除、セッション開始など）はすべてBotに送信され、Discord側にも即座に反映されます。
   - YouTube Live連携で追加されたユーザーもBotに送信されるため、DiscordとYouTubeの参加者をまとめて管理できます。

### セッションタイマー

1. **タイマー設定**: 「Timer (min)」で時間を設定（1〜60分）
2. **自動開始**: セッション開始時に自動的にタイマーがスタート
3. **手動操作**: 
   - 再生/一時停止ボタンでタイマーを制御
   - リセットボタンで設定時間に戻す
4. **アラート**: タイマーが0になると音声とダイアログでお知らせ

## 技術スタック

- **Vue.js 3**: リアクティブなUI管理
- **Tailwind CSS**: モダンなスタイリング
- **Phosphor Icons**: アイコンセット
- **LocalStorage**: データの永続化
- **YouTube Data API v3**: Live Chat連携

## データの保存

すべてのデータ（待機キュー、現在のセッション、履歴、設定）はブラウザのLocalStorageに自動保存されます。ページをリロードしてもデータは保持されます。

## ブラウザ要件

- モダンブラウザ（Chrome, Firefox, Edge, Safari）
- JavaScript有効
- LocalStorage有効

## ライセンス

MIT License

## 作者

開発: Antigravity AI Assistant
